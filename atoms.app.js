/* atoms v0.3.01 - 2014/2/17
   http://atomic.tapquo.com
   Copyright (c) 2014 Tapquo S.L. - Licensed  */
(function(){var _ref,_ref1,_ref2,_ref3,_ref4,_ref5,_ref6,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};Atoms.App={Article:{},Aside:{},Modal:{},Section:{},Url:null},Atoms.App.Url=function(a){var _activeSection,_addStepHistory,_article,_aside,_onChangeArticleSection,_options,_stepHistory;return _article=void 0,_options=Atoms.Url.options,_onChangeArticleSection=function(properties){var article;return article=a.App.Article[properties.article.toClassName()],article.el||article.render(),setTimeout(function(){return _options.forward||_stepHistory(0),_activeSection(article,properties.section),_article!==article?(_options.forward?(_stepHistory(1),article.state("in"),_article&&_article.state("back-in")):(_article.state("out"),article.state("back-out")),_article=article):void 0},1)},_aside=function(){return _article.aside()},_activeSection=function(article,section){return _addStepHistory(),article.section(section)},_addStepHistory=function(){var state;return state=window.history.state||{steps:0},state.steps++,window.history.replaceState(state)},_stepHistory=function(value){return window.history.replaceState({steps:value})},function(){return Atoms.Url.listen("/:article/:section",_onChangeArticleSection)}(),{aside:_aside}}(Atoms),Atoms.Atom.Button=function(_super){function Button(){this["default"]={events:["touch"]},Button.__super__.constructor.apply(this,arguments)}return __extends(Button,_super),Button.template='<button {{#if.id}}id="{{id}}"{{/if.id}} class="{{style}}{{^if.text}} icon{{/if.text}}" {{#if.disabled}}disabled{{/if.disabled}}>\n  {{#if.icon}}<span class="icon {{icon}}"></span>{{/if.icon}}\n  {{#if.text}}<abbr>{{text}}</abbr>{{/if.text}}\n</button>',Button.base="Button",Button}(Atoms.Class.Atom),Atoms.Atom.Input=function(_super){function Input(){this["default"]={type:"text"},Input.__super__.constructor.apply(this,arguments)}return __extends(Input,_super),Input.template='<input type="{{type}}" name="{{name}}" placeholder="{{placeholder}}" {{#if.style}}class="{{style}}"{{/if.style}} {{#if.value}}value="{{value}}"{{/if.value}} {{#required}}required{{/required}} />',Input.base="Input",Input.prototype.value=function(value){return null!=value?this.el.val(value):this.el.val()},Input.prototype.error=function(value){return null!=value?this.el.filter("input").addClass("error"):this.el.filter("input").removeClass("error")},Input}(Atoms.Class.Atom),Atoms.Atom.Label=function(_super){function Label(){return _ref=Label.__super__.constructor.apply(this,arguments)}return __extends(Label,_super),Label.template='<label {{#if.style}}class="{{style}}"{{/if.style}}>\n  {{#if.icon}}<span class="icon {{icon}}"></span>{{/if.icon}}\n  {{text}}\n  {{#if.count}}<strong>{{count}}</strong>{{/if.count}}\n</label>',Label.base="Label",Label}(Atoms.Class.Atom),Atoms.Atom.Li=function(_super){function Li(){return _ref1=Li.__super__.constructor.apply(this,arguments)}return __extends(Li,_super),Li.template='<li {{#if.style}}class="{{style}}"{{/if.style}}>\n  {{#if.image}}\n  <figure style="background-image: {{image}}"></figure>\n  {{/if.image}}\n  <div>\n    {{#if.date}}\n      <span>{{date}}</span>\n    {{/if.date}}\n    {{#if.text}}\n      <strong>{{text}}</strong>\n    {{/if.text}}\n    {{#if.description}}\n      <small>{{description}}</small>\n    {{/if.description}}\n  </div>\n</li>',Li.base="Li",Li}(Atoms.Class.Atom),Atoms.Atom.Link=function(_super){function Link(){return _ref2=Link.__super__.constructor.apply(this,arguments)}return __extends(Link,_super),Link.template='<a href="{{href}}" {{#if.style}}class="{{style}}"{{/if.style}}>\n  {{#if.icon}}<span class="icon {{icon}}"></span>{{/if.icon}}\n  {{#if.text}}{{text}}{{/if.text}}\n</a>',Link.base="Link",Link}(Atoms.Class.Atom),Atoms.Atom.Select=function(_super){function Select(attributes){Select.__super__.constructor.call(this,attributes),null!=attributes.value&&this.value(attributes.value)}return __extends(Select,_super),Select.template='<select name="{{name}}" {{#if.style}}class="{{style}}"{{/if.style}}>\n  {{#options}}\n    <option value="{{value}}">{{label}}</option>\n  {{/options}}\n</select>',Select.base="Select",Select.prototype.value=function(value){return null!=value?this.el.val(value):this.el.val()},Select}(Atoms.Class.Atom),Atoms.Atom.Textarea=function(_super){function Textarea(){return _ref3=Textarea.__super__.constructor.apply(this,arguments)}return __extends(Textarea,_super),Textarea.template='<textarea name="{{name}}" placeholder="{{placeholder}}" {{#if.style}}class="{{style}}"{{/if.style}}  {{#required}}required{{/required}}>\n  {{#if.value}}{{value}}{{/if.value}}\n</textarea>',Textarea.base="Textarea",Textarea.prototype.value=function(value){return null!=value?this.el.val(value):this.el.val()},Textarea.prototype.error=function(value){return null!=value?this.el.addClass("error"):this.el.removeClass("error")},Textarea}(Atoms.Class.Atom),Atoms.Atom.Title=function(_super){function Title(){return _ref4=Title.__super__.constructor.apply(this,arguments)}return __extends(Title,_super),Title.template='<h1 {{#if.style}}class="{{style}}"{{/if.style}}>\n  {{#if.image}}<img src="image" />{{/if.image}}\n  {{#if.text}}{{text}}{{/if.text}}\n</h1>',Title.base="Title",Title}(Atoms.Class.Atom),Atoms.Molecule.Form=function(_super){function Form(){this.onSelectChange=__bind(this.onSelectChange,this),this.onButtonTouch=__bind(this.onButtonTouch,this),this.onInputKeyup=__bind(this.onInputKeyup,this),this.onInputKeypress=__bind(this.onInputKeypress,this),Form.__super__.constructor.apply(this,arguments)}return __extends(Form,_super),Form.template='<form {{#if.id}}id="{{id}}"{{/if.id}} {{#if.style}}style="{{style}}"{{/if.style}}></form>',Form.available=["Atom.Label","Atom.Input","Atom.Textarea","Atom.Select","Atom.Button"],Form.base="Form",Form.prototype.value=function(){var child,properties,_i,_len,_ref5;for(properties={},_ref5=this.children,_i=0,_len=_ref5.length;_len>_i;_i++)child=_ref5[_i],null!=child.value&&(properties[child.attributes.name]=child.value());return properties},Form.prototype.onInputKeypress=function(event){return this.bubble("keypress",event)},Form.prototype.onInputKeyup=function(event){return this.bubble("keyup",event)},Form.prototype.onButtonTouch=function(event){return event.preventDefault(),this.bubble("submit",event),!1},Form.prototype.onSelectChange=function(event){return event.preventDefault(),this.bubble("change",event)},Form}(Atoms.Class.Molecule),Atoms.Molecule.List=function(_super){function List(){return _ref5=List.__super__.constructor.apply(this,arguments)}return __extends(List,_super),List.template='<ul {{#if.style}}class="{{style}}"{{/if.style}}></ul>',List.available=["Atom.Li"],List.base="List",List.prototype.filter=function(){return this},List.prototype.clean=function(){return this},List}(Atoms.Class.Molecule),Atoms.Molecule.Modal=function(_super){function Modal(attributes){this.attributes=null!=attributes?attributes:{},this.onAnimationEnd=__bind(this.onAnimationEnd,this),Modal.__super__.constructor.call(this,this.attributes),this.article=this.el.children("article"),this.article.bind(Atoms.Core.Constants.ANIMATION.END,this.onAnimationEnd),Atoms.App.Modal[this.constructor.name]=this}return __extends(Modal,_super),Modal.template='<div data-component="modal" {{#if.style}}class="{{style}}"{{/if.style}}">\n  <article></article>\n</div>',Modal.base="Modal",Modal.prototype.show=function(){return this.el.addClass("active"),this.article.addClass("show"),this.trigger("show")},Modal.prototype.hide=function(){return this.article.removeClass("show").addClass("hide"),this.trigger("hide")},Modal.prototype.onAnimationEnd=function(){return this.article.hasClass("hide")?(this.el.removeClass("active"),this.article.removeClass("hide")):void 0},Modal}(Atoms.Class.Molecule),Atoms.Molecule.Confirm=function(_super){function Confirm(){var navigation;Confirm.__super__.constructor.apply(this,arguments),navigation=new Atoms.Molecule.Navigation({parent:this,container:this.el.find("footer"),children:[{"Atom.Button":{text:this.attributes.accept,action:"accept"}},{"Atom.Button":{text:this.attributes.cancel,action:"cancel"}}]})}return __extends(Confirm,_super),Confirm.template='<div data-component="modal" class="confirm {{#if.style}}{{style}}{{/if.style}}">\n  <article>\n    <header>\n      {{#if.icon}}<span class="icon {{icon}}"></span>{{/if.icon}}\n      {{#if.title}}<h1>{{title}}</h1>{{/if.title}}\n    </header>\n    <section>{{text}}</section>\n    <footer></footer>\n  </article>\n</div>',Confirm.prototype.onButtonTouch=function(event,atom){return this.trigger(atom.attributes.action),this.hide(),!1},Confirm}(Atoms.Molecule.Modal),Atoms.Molecule.Loading=function(_super){function Loading(){return _ref6=Loading.__super__.constructor.apply(this,arguments)}return __extends(Loading,_super),Loading.template='<div data-component="modal" class="loading {{#if.style}}{{style}}{{/if.style}}">\n  <article></article>\n</div>',Loading}(Atoms.Molecule.Modal),new Atoms.Molecule.Loading,Atoms.Molecule.Navigation=function(_super){function Navigation(){this.onButtonTouch=__bind(this.onButtonTouch,this),this["default"]={style:"left"},Navigation.__super__.constructor.apply(this,arguments)}return __extends(Navigation,_super),Navigation.template='<nav {{#if.style}}class="{{style}}"{{/if.style}}></nav>',Navigation.available=["Atom.Button","Atom.Link"],Navigation.base="Navigation",Navigation.prototype.onButtonTouch=function(event,atom){var path;return atom.el.addClass("active").siblings().removeClass("active"),null!=this.attributes.events&&__indexOf.call(this.attributes.events,"select")>=0&&this.bubble("select",event),path=atom.attributes.path,path?("aside"===path?Atoms.App.Url.aside():"back"===path?Atoms.Url.back():null!=path&&Atoms.Url.path(path),!1):void 0},Navigation}(Atoms.Class.Molecule),Atoms.Molecule.Search=function(_super){function Search(){this.buttonTouch=__bind(this.buttonTouch,this),this.inputKeyup=__bind(this.inputKeyup,this),this["default"]={children:[{"Atom.Input":{type:"search",placeholder:"Type your search...",events:["keyup"]}},{"Atom.Button":{icon:"Search",events:["touch"]}}]},Search.__super__.constructor.apply(this,arguments)}return __extends(Search,_super),Search.template='<fieldset {{#if.style}}class="{{style}}"{{/if.style}}></fieldset>',Search.available=["Atom.Input","Atom.Button"],Search.base="Search",Search.prototype.inputKeyup=function(event,atom){return this.trigger("keyup",event.keyCode),13===event.keyCode?this._search(event,atom):void 0},Search.prototype.buttonTouch=function(event,atom){return this._search(event,atom)},Search.prototype._search=function(event,atom){var value;return value=this.input[0].el.val(),""!==value?this.trigger("enter",value,atom):void 0},Search}(Atoms.Class.Molecule),Atoms.Organism.Article=function(_super){function Article(){this._onAnimationEnd=__bind(this._onAnimationEnd,this),Article.__super__.constructor.apply(this,arguments),Atoms.App.Article[this.constructor.name]=this}return __extends(Article,_super),Article.template='<article {{#if.id}}id="{{id}}"{{/if.id}} {{#if.style}}class="{{style}}"{{/if.style}}></article>',Article.available=["Organism.Header","Organism.Section","Organism.Footer"],Article.prototype.render=function(){return Article.__super__.render.apply(this,arguments),this.el.bind(Atoms.Core.Constants.ANIMATION.END,this._onAnimationEnd)},Article.prototype["in"]=function(){return this.state("in")},Article.prototype.out=function(){return this.state("out")},Article.prototype.backIn=function(){return this.state("back-in")},Article.prototype.backOut=function(){return this.state("back-out")},Article.prototype.state=function(name){return this.el.addClass("active").attr("data-state",name)},Article.prototype.section=function(id){return this.el.children("#"+id).addClass("active").siblings("section").removeClass("active"),"aside-in"===this.el.attr("data-state")?this.aside():void 0},Article.prototype.aside=function(){var method,state,_this=this;return state=this.el.attr("data-state"),null!=this.attributes.aside&&(method=null!=state?"out":"in",Atoms.App.Aside[this.attributes.aside][method]()),this.el.removeAttr("data-state"),setTimeout(function(){return _this.state("aside-in"===state?"aside-out":"aside-in")},0)},Article.prototype._onAnimationEnd=function(){var state;return state=this.el.attr("data-state"),this.trigger(state),"in"===state||"back-out"===state?this.trigger("active"):("out"===state||"back-in"===state)&&this.trigger("inactive"),"aside-in"!==state&&this.el.removeAttr("data-state"),"in"!==state&&"back-out"!==state&&"aside-in"!==state&&"aside-out"!==state?this.el.removeClass("active"):void 0},Article}(Atoms.Class.Organism),Atoms.Organism.Aside=function(_super){function Aside(attributes){null==attributes&&(attributes={}),this._onAnimationEnd=__bind(this._onAnimationEnd,this),attributes.method="prepend",Aside.__super__.constructor.call(this,attributes),Atoms.App.Aside[this.constructor.name]=this}return __extends(Aside,_super),Aside.template='<aside {{#if.id}}id="{{id}}"{{/if.id}} {{#if.style}}class="{{style}}"{{/if.style}}></aside>',Aside.available=["Organism.Header","Organism.Section","Organism.Footer"],Aside.prototype.render=function(){return Aside.__super__.render.apply(this,arguments),this.el.bind(Atoms.Core.Constants.ANIMATION.END,this._onAnimationEnd)},Aside.prototype["in"]=function(){return this.el||this.render(),this.el.addClass("active"),this.el.attr("data-state","in")},Aside.prototype.out=function(){var _ref7;return(null!=(_ref7=this.el)?_ref7.hasClass("active"):void 0)?this.el.attr("data-state","out"):void 0},Aside.prototype._onAnimationEnd=function(){var state;return state=this.el.attr("data-state"),this.trigger(state),this.el.removeAttr("data-state"),"out"===state?this.el.removeClass("active"):void 0},Aside}(Atoms.Class.Organism),Atoms.Organism.Footer=function(_super){function Footer(){Footer.__super__.constructor.apply(this,arguments),this.render()}return __extends(Footer,_super),Footer.template='<footer {{#if.style}}class="{{style}}"{{/if.style}}></footer>',Footer.available=["Molecule.Navigation"],Footer}(Atoms.Class.Organism),Atoms.Organism.Header=function(_super){function Header(){Header.__super__.constructor.apply(this,arguments),this.render()}return __extends(Header,_super),Header.template='<header {{#if.style}}class="{{style}}"{{/if.style}}></header>',Header.available=["Atom.Title","Molecule.Navigation"],Header}(Atoms.Class.Organism),Atoms.Organism.Section=function(_super){function Section(){Section.__super__.constructor.apply(this,arguments),this.render()}return __extends(Section,_super),Section.template='<section {{#if.id}}id="{{id}}"{{/if.id}} {{#if.style}}class="{{style}}"{{/if.style}}></section>',Section.available=["Molecule.Form","Molecule.Navigation","Molecule.List","Atom.Button"],Section}(Atoms.Class.Organism)}).call(this);